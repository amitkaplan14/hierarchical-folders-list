"use strict";var e=require("react"),n=require("@emotion/styled"),t=require("classnames"),r=function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},r.apply(this,arguments)};function i(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}"function"==typeof SuppressedError&&SuppressedError;var o,a,l,d,s,c,u,f=function(e,n,t){return void 0===n&&(n=0),e.reduce((function(e,r){var i=Boolean(r.isFolder||r.children&&r.children.length>0),o={id:r.id,name:r.name,isFolder:i,depth:n,parentId:t,data:r};return e.push(o),i&&r.children&&r.children.length>0&&e.push.apply(e,f(r.children,n+1,r.id)),e}),[])},p=function(e,n){for(var t=[],r=new Set([void 0]),i=0,o=e;i<o.length;i++){var a=o[i];r.has(a.parentId)&&(t.push(a),a.isFolder&&n.has(a.id)&&r.add(a.id))}return t},h=function(e,n,t){var r=n.findIndex((function(n){return n.id===e}));return-1===r?null:n["down"===t?Math.min(r+1,n.length-1):Math.max(r-1,0)].id},v=function(n){var t=n.items,i=n.itemHeight,o=n.overscan,a=void 0===o?5:o,l=n.enabled,d=void 0===l||l,s=e.useRef(null),c=e.useState({start:0,end:20}),u=c[0],f=c[1];t.length;var p=e.useCallback((function(){if(s.current&&d){var e=s.current,n=e.scrollTop,r=e.clientHeight,o=Math.max(0,Math.floor(n/i)-a),l=Math.min(t.length-1,Math.ceil((n+r)/i)+a);f({start:o,end:l})}}),[i,t.length,a,d]),h=e.useCallback((function(e){if(s.current&&d){var n=e*i;s.current.scrollTop=n}}),[i,d]),v=e.useCallback((function(e){if(s.current&&d){var n=s.current,t=e*i,r=t+i,o=n.scrollTop,a=o+n.clientHeight;t<o?n.scrollTop=t:r>a&&(n.scrollTop=r-n.clientHeight)}}),[i,d]);e.useEffect((function(){if(d){var e=s.current;if(e){var n=function(){p()};return e.addEventListener("scroll",n),function(){e.removeEventListener("scroll",n)}}}}),[p,d]),e.useEffect((function(){if(d){var e=function(){p()};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[p,d]),e.useEffect((function(){p()}),[p,t]);return{visibleItems:(d?t.slice(u.start,u.end+1):t).map((function(e){var n=t.findIndex((function(n){return n.id===e.id}));return r(r({},e),{style:{position:"absolute",top:"".concat(n*i,"px"),left:0,width:"100%",height:"".concat(i,"px")}})})),containerStyle:d?{position:"relative",height:"100%",overflow:"auto"}:{},containerRef:s,scrollToIndex:h,scrollItemIntoView:v}},g=function(n){var t=n.enabled,r=void 0===t||t,i=n.expandOnEnter,o=void 0===i||i,a=n.collapseOnEscape,l=void 0===a||a,d=n.navigateWithArrows,s=void 0===d||d,c=n.visibleItems,u=n.selectedId,f=n.expandedIds,p=n.setSelectedId,v=n.toggleExpand;n.scrollToIndex;var g=n.scrollItemIntoView,x=e.useCallback((function(e){if(r&&u){var n=c.find((function(e){return e.id===u}));if(n)switch(c.findIndex((function(e){return e.id===u})),e.key){case"ArrowDown":if(!s)return;e.preventDefault();var t=h(u,c,"down");if(t){p(t);var i=c.findIndex((function(e){return e.id===t}));g(i)}break;case"ArrowUp":if(!s)return;e.preventDefault();var a=h(u,c,"up");if(a){p(a);var d=c.findIndex((function(e){return e.id===a}));g(d)}break;case"ArrowRight":if(!s)return;e.preventDefault(),n.isFolder&&!f.has(u)&&v(u);break;case"ArrowLeft":if(!s)return;if(e.preventDefault(),n.isFolder&&f.has(u))v(u);else if(n.parentId){var x=c.find((function(e){return e.id===n.parentId}));if(x){p(x.id);var m=c.findIndex((function(e){return e.id===x.id}));g(m)}}break;case"Enter":if(!o)return;e.preventDefault(),n.isFolder&&v(u);break;case"Escape":if(!l)return;if(e.preventDefault(),n.isFolder&&f.has(u))v(u);else if(n.parentId){var b=c.find((function(e){return e.id===n.parentId}));if(b){p(b.id);m=c.findIndex((function(e){return e.id===b.id}));g(m)}}}}}),[r,u,c,f,s,o,l,p,v,g]);e.useEffect((function(){if(r)return window.addEventListener("keydown",x),function(){window.removeEventListener("keydown",x)}}),[r,x])},x=n.div(o||(o=i(["\n  display: flex;\n  align-items: center;\n  padding-left: ","px;\n  height: ","px;\n  cursor: pointer;\n  user-select: none;\n  background-color: ",";\n  border-left: ",";\n  \n  &:hover {\n    background-color: ",";\n  }\n"],["\n  display: flex;\n  align-items: center;\n  padding-left: ","px;\n  height: ","px;\n  cursor: pointer;\n  user-select: none;\n  background-color: ",";\n  border-left: ",";\n  \n  &:hover {\n    background-color: ",";\n  }\n"])),(function(e){return 20*e.depth+4}),(function(e){return e.height}),(function(e){return e.isSelected?"rgba(0, 120, 215, 0.1)":"transparent"}),(function(e){return e.isSelected?"2px solid #0078d7":"2px solid transparent"}),(function(e){return e.isSelected?"rgba(0, 120, 215, 0.2)":"rgba(0, 0, 0, 0.05)"})),m=n.div(a||(a=i(["\n  display: flex;\n  align-items: center;\n  margin-right: 6px;\n  width: 20px;\n  height: 20px;\n  \n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  margin-right: 6px;\n  width: 20px;\n  height: 20px;\n  \n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),b=n.div(l||(l=i(["\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 4px;\n  transform: rotate(",");\n  transition: transform 0.1s ease;\n  \n  &::before {\n    content: '';\n    display: block;\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 4px 0 4px 6px;\n    border-color: transparent transparent transparent #555;\n  }\n"],["\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 4px;\n  transform: rotate(",");\n  transition: transform 0.1s ease;\n  \n  &::before {\n    content: '';\n    display: block;\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 4px 0 4px 6px;\n    border-color: transparent transparent transparent #555;\n  }\n"])),(function(e){return e.isExpanded?"90deg":"0deg"})),w=n.div(d||(d=i(["\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n"],["\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n"]))),I=n.div(s||(s=i(["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex-grow: 1;\n"],["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex-grow: 1;\n"]))),E=function(){return e.createElement("svg",{viewBox:"0 0 24 24",fill:"#ffc107",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"}))},k=function(){return e.createElement("svg",{viewBox:"0 0 24 24",fill:"#90caf9",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"}))},y=function(n){var t=n.item,r=n.depth,i=n.isExpanded,o=n.isSelected,a=n.toggleExpand,l=n.onItemClick,d=n.onItemDoubleClick,s=n.onItemContextMenu,c=n.renderItemContent,u=n.renderItemIcon,f=n.itemHeight,p=e.useCallback((function(e){e.stopPropagation(),l(t)}),[l,t]),h=e.useCallback((function(e){e.stopPropagation(),d&&d(t),(t.isFolder||t.children&&t.children.length>0)&&a(t.id)}),[d,a,t]),v=e.useCallback((function(e){e.preventDefault(),e.stopPropagation(),s&&s(t,e)}),[s,t]),g=e.useCallback((function(e){e.stopPropagation(),a(t.id)}),[a,t.id]),y=Boolean(t.isFolder||t.children&&t.children.length>0),C=e.useCallback((function(){return u?u(t,i):y?e.createElement(E,null):e.createElement(k,null)}),[t,y,i,u]),S=c?c(t,i):e.createElement(I,null,t.name);return e.createElement(x,{depth:r,isSelected:o,isFolder:y,height:f,onClick:p,onDoubleClick:h,onContextMenu:v,"data-item-id":t.id},y?e.createElement(b,{isExpanded:i,onClick:g}):e.createElement(w,null),e.createElement(m,null,t.icon||C()),S)},C=n.div(c||(c=i(["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  background-color: #fff;\n  box-sizing: border-box;\n  outline: none;\n"],["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  background-color: #fff;\n  box-sizing: border-box;\n  outline: none;\n"]))),S=n.div(u||(u=i(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n"],["\n  position: relative;\n  width: 100%;\n  height: 100%;\n"])));exports.FolderItem=y,exports.FolderList=function(n){var r=n.data,i=n.onItemClick,o=n.onItemDoubleClick,a=n.onItemContextMenu,l=n.renderItemContent,d=n.renderItemIcon,s=n.itemHeight,c=void 0===s?28:s,u=n.className,h=n.style,x=n.defaultExpandedIds,m=void 0===x?[]:x,b=n.keyboard,w=void 0===b?{enabled:!0,expandOnEnter:!0,collapseOnEscape:!0,navigateWithArrows:!0}:b,I=n.virtualizationOptions,E=void 0===I?{enabled:!0,overscan:10}:I,k=e.useState(new Set(m)),H=k[0],M=k[1],F=e.useState(null),O=F[0],z=F[1],D=e.useRef(null),L=e.useMemo((function(){return f(r)}),[r]),A=e.useMemo((function(){return p(L,H)}),[L,H]),T=v({items:A,itemHeight:c,overscan:null==E?void 0:E.overscan,enabled:null==E?void 0:E.enabled}),V=T.visibleItems,P=T.containerStyle,R=T.containerRef,j=T.scrollToIndex,B=T.scrollItemIntoView,W=e.useCallback((function(e){z(e.id),i&&i(e)}),[i]),q=e.useCallback((function(e){M((function(n){var t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t}))}),[]);g({enabled:null==w?void 0:w.enabled,expandOnEnter:null==w?void 0:w.expandOnEnter,collapseOnEscape:null==w?void 0:w.collapseOnEscape,navigateWithArrows:null==w?void 0:w.navigateWithArrows,visibleItems:A,selectedId:O,expandedIds:H,setSelectedId:z,toggleExpand:q,scrollToIndex:j,scrollItemIntoView:B}),e.useEffect((function(){D.current&&(null==w?void 0:w.enabled)&&D.current.focus()}),[null==w?void 0:w.enabled]);var N=e.useCallback((function(e){R.current=e,D.current!==e&&(D.current=e)}),[R]);return e.createElement(C,{ref:D,className:t("hierarchical-folder-list",u),style:h,tabIndex:0},e.createElement(S,{ref:N,style:P},e.createElement("div",{style:{height:"".concat(A.length*c,"px"),position:"relative"}},V.map((function(n){var t=n,r=H.has(t.id),i=O===t.id,s=t.depth;return e.createElement("div",{key:t.id,style:n.style},e.createElement(y,{item:t.data,depth:s,isExpanded:r,isSelected:i,toggleExpand:q,onItemClick:W,onItemDoubleClick:o,onItemContextMenu:a,renderItemContent:l,renderItemIcon:d,itemHeight:c}))})))))},exports.flattenTree=f,exports.getVisibleItems=p,exports.useKeyboardNavigation=g,exports.useVirtualization=v;
//# sourceMappingURL=index.js.map
