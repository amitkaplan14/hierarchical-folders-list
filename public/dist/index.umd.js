!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("@emotion/styled"),require("classnames")):"function"==typeof define&&define.amd?define(["exports","react","@emotion/styled","classnames"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).HierarchicalFoldersList={},e.React,e.emotionStyled,e.classNames)}(this,(function(e,n,t,r){"use strict";var i=function(){return i=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},i.apply(this,arguments)};function o(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}"function"==typeof SuppressedError&&SuppressedError;var l,a,d,s,c,u,f,p=function(e,n,t){return void 0===n&&(n=0),e.reduce((function(e,r){var i=Boolean(r.isFolder||r.children&&r.children.length>0),o={id:r.id,name:r.name,isFolder:i,depth:n,parentId:t,data:r};return e.push(o),i&&r.children&&r.children.length>0&&e.push.apply(e,p(r.children,n+1,r.id)),e}),[])},h=function(e,n){for(var t=[],r=new Set([void 0]),i=0,o=e;i<o.length;i++){var l=o[i];r.has(l.parentId)&&(t.push(l),l.isFolder&&n.has(l.id)&&r.add(l.id))}return t},v=function(e,n,t){var r=n.findIndex((function(n){return n.id===e}));return-1===r?null:n["down"===t?Math.min(r+1,n.length-1):Math.max(r-1,0)].id},g=function(e){var t=e.items,r=e.itemHeight,o=e.overscan,l=void 0===o?5:o,a=e.enabled,d=void 0===a||a,s=n.useRef(null),c=n.useState({start:0,end:20}),u=c[0],f=c[1];t.length;var p=n.useCallback((function(){if(s.current&&d){var e=s.current,n=e.scrollTop,i=e.clientHeight,o=Math.max(0,Math.floor(n/r)-l),a=Math.min(t.length-1,Math.ceil((n+i)/r)+l);f({start:o,end:a})}}),[r,t.length,l,d]),h=n.useCallback((function(e){if(s.current&&d){var n=e*r;s.current.scrollTop=n}}),[r,d]),v=n.useCallback((function(e){if(s.current&&d){var n=s.current,t=e*r,i=t+r,o=n.scrollTop,l=o+n.clientHeight;t<o?n.scrollTop=t:i>l&&(n.scrollTop=i-n.clientHeight)}}),[r,d]);n.useEffect((function(){if(d){var e=s.current;if(e){var n=function(){p()};return e.addEventListener("scroll",n),function(){e.removeEventListener("scroll",n)}}}}),[p,d]),n.useEffect((function(){if(d){var e=function(){p()};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[p,d]),n.useEffect((function(){p()}),[p,t]);return{visibleItems:(d?t.slice(u.start,u.end+1):t).map((function(e){var n=t.findIndex((function(n){return n.id===e.id}));return i(i({},e),{style:{position:"absolute",top:"".concat(n*r,"px"),left:0,width:"100%",height:"".concat(r,"px")}})})),containerStyle:d?{position:"relative",height:"100%",overflow:"auto"}:{},containerRef:s,scrollToIndex:h,scrollItemIntoView:v}},m=function(e){var t=e.enabled,r=void 0===t||t,i=e.expandOnEnter,o=void 0===i||i,l=e.collapseOnEscape,a=void 0===l||l,d=e.navigateWithArrows,s=void 0===d||d,c=e.visibleItems,u=e.selectedId,f=e.expandedIds,p=e.setSelectedId,h=e.toggleExpand;e.scrollToIndex;var g=e.scrollItemIntoView,m=n.useCallback((function(e){if(r&&u){var n=c.find((function(e){return e.id===u}));if(n)switch(c.findIndex((function(e){return e.id===u})),e.key){case"ArrowDown":if(!s)return;e.preventDefault();var t=v(u,c,"down");if(t){p(t);var i=c.findIndex((function(e){return e.id===t}));g(i)}break;case"ArrowUp":if(!s)return;e.preventDefault();var l=v(u,c,"up");if(l){p(l);var d=c.findIndex((function(e){return e.id===l}));g(d)}break;case"ArrowRight":if(!s)return;e.preventDefault(),n.isFolder&&!f.has(u)&&h(u);break;case"ArrowLeft":if(!s)return;if(e.preventDefault(),n.isFolder&&f.has(u))h(u);else if(n.parentId){var m=c.find((function(e){return e.id===n.parentId}));if(m){p(m.id);var x=c.findIndex((function(e){return e.id===m.id}));g(x)}}break;case"Enter":if(!o)return;e.preventDefault(),n.isFolder&&h(u);break;case"Escape":if(!a)return;if(e.preventDefault(),n.isFolder&&f.has(u))h(u);else if(n.parentId){var b=c.find((function(e){return e.id===n.parentId}));if(b){p(b.id);x=c.findIndex((function(e){return e.id===b.id}));g(x)}}}}}),[r,u,c,f,s,o,a,p,h,g]);n.useEffect((function(){if(r)return window.addEventListener("keydown",m),function(){window.removeEventListener("keydown",m)}}),[r,m])},x=t.div(l||(l=o(["\n  display: flex;\n  align-items: center;\n  padding-left: ","px;\n  height: ","px;\n  cursor: pointer;\n  user-select: none;\n  background-color: ",";\n  border-left: ",";\n  \n  &:hover {\n    background-color: ",";\n  }\n"],["\n  display: flex;\n  align-items: center;\n  padding-left: ","px;\n  height: ","px;\n  cursor: pointer;\n  user-select: none;\n  background-color: ",";\n  border-left: ",";\n  \n  &:hover {\n    background-color: ",";\n  }\n"])),(function(e){return 20*e.depth+4}),(function(e){return e.height}),(function(e){return e.isSelected?"rgba(0, 120, 215, 0.1)":"transparent"}),(function(e){return e.isSelected?"2px solid #0078d7":"2px solid transparent"}),(function(e){return e.isSelected?"rgba(0, 120, 215, 0.2)":"rgba(0, 0, 0, 0.05)"})),b=t.div(a||(a=o(["\n  display: flex;\n  align-items: center;\n  margin-right: 6px;\n  width: 20px;\n  height: 20px;\n  \n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  margin-right: 6px;\n  width: 20px;\n  height: 20px;\n  \n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),w=t.div(d||(d=o(["\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 4px;\n  transform: rotate(",");\n  transition: transform 0.1s ease;\n  \n  &::before {\n    content: '';\n    display: block;\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 4px 0 4px 6px;\n    border-color: transparent transparent transparent #555;\n  }\n"],["\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 4px;\n  transform: rotate(",");\n  transition: transform 0.1s ease;\n  \n  &::before {\n    content: '';\n    display: block;\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 4px 0 4px 6px;\n    border-color: transparent transparent transparent #555;\n  }\n"])),(function(e){return e.isExpanded?"90deg":"0deg"})),I=t.div(s||(s=o(["\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n"],["\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n"]))),E=t.div(c||(c=o(["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex-grow: 1;\n"],["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex-grow: 1;\n"]))),y=function(){return n.createElement("svg",{viewBox:"0 0 24 24",fill:"#ffc107",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"}))},k=function(){return n.createElement("svg",{viewBox:"0 0 24 24",fill:"#90caf9",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"}))},C=function(e){var t=e.item,r=e.depth,i=e.isExpanded,o=e.isSelected,l=e.toggleExpand,a=e.onItemClick,d=e.onItemDoubleClick,s=e.onItemContextMenu,c=e.renderItemContent,u=e.renderItemIcon,f=e.itemHeight,p=n.useCallback((function(e){e.stopPropagation(),a(t)}),[a,t]),h=n.useCallback((function(e){e.stopPropagation(),d&&d(t),(t.isFolder||t.children&&t.children.length>0)&&l(t.id)}),[d,l,t]),v=n.useCallback((function(e){e.preventDefault(),e.stopPropagation(),s&&s(t,e)}),[s,t]),g=n.useCallback((function(e){e.stopPropagation(),l(t.id)}),[l,t.id]),m=Boolean(t.isFolder||t.children&&t.children.length>0),C=n.useCallback((function(){return u?u(t,i):m?n.createElement(y,null):n.createElement(k,null)}),[t,m,i,u]),S=c?c(t,i):n.createElement(E,null,t.name);return n.createElement(x,{depth:r,isSelected:o,isFolder:m,height:f,onClick:p,onDoubleClick:h,onContextMenu:v,"data-item-id":t.id},m?n.createElement(w,{isExpanded:i,onClick:g}):n.createElement(I,null),n.createElement(b,null,t.icon||C()),S)},S=t.div(u||(u=o(["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  background-color: #fff;\n  box-sizing: border-box;\n  outline: none;\n"],["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  background-color: #fff;\n  box-sizing: border-box;\n  outline: none;\n"]))),H=t.div(f||(f=o(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n"],["\n  position: relative;\n  width: 100%;\n  height: 100%;\n"])));e.FolderItem=C,e.FolderList=function(e){var t=e.data,i=e.onItemClick,o=e.onItemDoubleClick,l=e.onItemContextMenu,a=e.renderItemContent,d=e.renderItemIcon,s=e.itemHeight,c=void 0===s?28:s,u=e.className,f=e.style,v=e.defaultExpandedIds,x=void 0===v?[]:v,b=e.keyboard,w=void 0===b?{enabled:!0,expandOnEnter:!0,collapseOnEscape:!0,navigateWithArrows:!0}:b,I=e.virtualizationOptions,E=void 0===I?{enabled:!0,overscan:10}:I,y=n.useState(new Set(x)),k=y[0],M=y[1],F=n.useState(null),O=F[0],z=F[1],D=n.useRef(null),L=n.useMemo((function(){return p(t)}),[t]),T=n.useMemo((function(){return h(L,k)}),[L,k]),A=g({items:T,itemHeight:c,overscan:null==E?void 0:E.overscan,enabled:null==E?void 0:E.enabled}),V=A.visibleItems,R=A.containerStyle,j=A.containerRef,P=A.scrollToIndex,B=A.scrollItemIntoView,N=n.useCallback((function(e){z(e.id),i&&i(e)}),[i]),W=n.useCallback((function(e){M((function(n){var t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t}))}),[]);m({enabled:null==w?void 0:w.enabled,expandOnEnter:null==w?void 0:w.expandOnEnter,collapseOnEscape:null==w?void 0:w.collapseOnEscape,navigateWithArrows:null==w?void 0:w.navigateWithArrows,visibleItems:T,selectedId:O,expandedIds:k,setSelectedId:z,toggleExpand:W,scrollToIndex:P,scrollItemIntoView:B}),n.useEffect((function(){D.current&&(null==w?void 0:w.enabled)&&D.current.focus()}),[null==w?void 0:w.enabled]);var q=n.useCallback((function(e){j.current=e,D.current!==e&&(D.current=e)}),[j]);return n.createElement(S,{ref:D,className:r("hierarchical-folder-list",u),style:f,tabIndex:0},n.createElement(H,{ref:q,style:R},n.createElement("div",{style:{height:"".concat(T.length*c,"px"),position:"relative"}},V.map((function(e){var t=e,r=k.has(t.id),i=O===t.id,s=t.depth;return n.createElement("div",{key:t.id,style:e.style},n.createElement(C,{item:t.data,depth:s,isExpanded:r,isSelected:i,toggleExpand:W,onItemClick:N,onItemDoubleClick:o,onItemContextMenu:l,renderItemContent:a,renderItemIcon:d,itemHeight:c}))})))))},e.flattenTree=p,e.getVisibleItems=h,e.useKeyboardNavigation=m,e.useVirtualization=g}));
//# sourceMappingURL=index.umd.js.map
